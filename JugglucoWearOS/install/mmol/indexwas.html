<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
    <link rel="icon" href="https://www.juggluco.nl/Juggluco/arrow.png">
	<title>Juggluco for WearOS install</title>
    <style type="text/css">
		@page { size: 8.27in 11.69in; margin: 0.79in }
		p { margin-bottom: 0.1in; line-height: 115%; background: transparent }
		a:link { color: #000080; text-decoration: underline }
figure {
    display: inline-block;
}

        h3{text-align: right;}
        h4{text-align: center;}
	</style>
</head>
<body lang="en-US" dir="ltr"><h1 class="western">Juggluco for WearOS install</h1>
<p style="line-height: 100%; margin-bottom: 0in">Juggluco is again available at Google Play, but it is still possible to install
Juggluco via adb on your watch. This is needed for FreeStyle Libre 3 sensors. <a href="https://www.juggluco.nl/Juggluco/download.html">Download Juggluco</a></p>
<p style="line-height: 100%; margin-bottom: 0in">For instruction more instruction on how to install an APK on WearOS see:</p>
<p style="line-height: 100%; margin-bottom: 0in"><a href="https://www.guidingtech.com/how-to-install-apks-on-wear-os-smartwatches">https://www.guidingtech.com/how-to-install-apks-on-wear-os-smartwatches</a>
</p>
<p><a href="https://www.reddit.com/r/WearOS/comments/p1l9of/how_to_install_apps_on_wear_os_all_methods/">https://www.reddit.com/r/WearOS/comments/p1l9of/how_to_install_apps_on_wear_os_all_methods/</a>
</p>
<p style="line-height: 100%; margin-bottom: 0in">First you need to
get adb, see
<a href="https://www.xda-developers.com/install-adb-windows-macos-linux/">https://www.xda-developers.com/install-adb-windows-macos-linux/</a></p>
<p style="line-height: 100%; margin-bottom: 0in"><b>Download adb:</b></p>
<p style="line-height: 100%; margin-bottom: 0in">Windows:</p>
<p style="line-height: 100%; margin-bottom: 0in"><a href="https://dl.google.com/android/repository/platform-tools-latest-windows.zip">https://dl.google.com/android/repository/platform-tools-latest-windows.zip</a></p>
<p style="line-height: 100%; margin-bottom: 0in">Mac:</p>
<p style="line-height: 100%; margin-bottom: 0in"><a href="https://dl.google.com/android/repository/platform-tools-latest-darwin.zip">https://dl.google.com/android/repository/platform-tools-latest-darwin.zip</a></p>
<p style="line-height: 100%; margin-bottom: 0in">Linux:</p>
<p style="line-height: 100%; margin-bottom: 0in"><a href="https://dl.google.com/android/repository/platform-tools-latest-linux.zip">https://dl.google.com/android/repository/platform-tools-latest-linux.zip</a></p>
<p style="line-height: 100%; margin-bottom: 0in">You also need to
enable <b>developer options</b> on your watch
(<a href="https://developer.android.com/training/wearables/get-started/debugging">https://developer.android.com/training/wearables/get-started/debugging</a>):</p>
<p style="line-height: 100%; margin-bottom: 0in">How exactly you have
to do it, differs per watch. On Watch4 you have to press on &quot;About
Watch&quot; in Settings. Press on &quot;Software Info&quot; and then
touch 7 times &quot;Software version&quot;. You can turn it off again
by doing the same, so if you do it too long it is turned off again.</p>
<p style="line-height: 100%; margin-bottom: 0in">Now an item called
&quot;Developer options&quot; is added to Settings. Here &quot;ADB
Debugging&quot; and &quot;Debug over Wi-Fi&quot; should be turned on.</p>
<p style="line-height: 100%; margin-bottom: 0in">Ensure that <b>WIFI</b>
is stably turned on on your watch. If it is not, go in Juggluco on
your watch to Left menu-&gt;Mirror and turn on WIFI (remember to turn
it off later).</p>
<p style="line-height: 100%; margin-bottom: 0in">Get the IP of your
watch. In Watch4 you can find it be going to
settings-&gt;Connections-&gt;Wifi and pressing on your connection. At
the bottom you find the IP address of the watch.</p>
<p style="line-height: 100%; margin-bottom: 0in">On your computer
press:</p>
<pre><b>adb connect IP-of-watch</b></pre><p style="line-height: 100%; margin-bottom: 0in">
On you watch you are asked: allow debugging?</p>
<p style="line-height: 100%; margin-bottom: 0in">Press Yes or Always
allow from this computer.</p>
<p style="line-height: 100%; margin-bottom: 0in">Hereafter</p>
<pre>adb devices</pre><p style="line-height: 100%; margin-bottom: 0in">
should show something like:</p>
<p style="line-height: 100%; margin-bottom: 0in">192.168.1.73:5555	device</p>
<p style="line-height: 100%; margin-bottom: 0in">Now you can install
Juggluco with the following command:</p>
<pre><b>adb install -r apkfile</b></pre><p style="line-height: 100%; margin-bottom: 0in">
The -r option is only needed for an update (when Juggluco was already
installed on the watch).</p>



    <figure> <img src="JugglucoWear.png" style="object-fit:contain;height:4.5cm; width:auto;">
      <figcaption><span style="font-size: 0.9em; font-family: Times New Roman;">Open Juggluco</span></figcaption> </figure>
    <figure> <img src="menuwatch.jpg" style="object-fit:contain;height:auto; width:11.5cm;">
      <figcaption><span style="font-size: 0.9em; font-family: Times New Roman;">Select Watch in left menu</span></figcaption> </figure>
    <figure> <img src="openWearOsConfig.jpg" style="object-fit:contain;height:auto; width:11.5cm;">
      <figcaption><span style="font-size: 0.9em; font-family: Times New Roman;">Set WearOs and select Config</span></figcaption> </figure>
    <figure> <img src="initwatch.jpg" style="object-fit:contain;height:auto; width:11.5cm;">
      <figcaption><span style="font-size: 0.9em; font-family: Times New Roman;">Press "Init watch app"
</span></figcaption> </figure>
    <figure> <img src="nohost.png" style="object-fit:contain;height:auto; width:4.5cm;">
      <figcaption><span style="font-size: 0.9em; font-family: Times New Roman;">WRONG: Left menu-> Mirror doesn't contain an IP. Press again on "Init watch app".</span></figcaption> </figure>
    <figure> <img src="withhostname.png" style="object-fit:contain;height:auto; width:4.5cm;">
      <figcaption><span style="font-size: 0.9em; font-family: Times New Roman;">RIGHT: Connection contains IP of the phone</span></figcaption> </figure>

<p>A special version of Juggluco can run directly on a Wear Os watch.
It needs an Android smartphone with NFC to scan the sensor and via a
TCP connection this data is sent to the Wear OS watch. Hereafter
there are two possibilities:</p>
<ol>
	<li><p>The sensor stays connected with the smartphone and the
	smartphone sends every glucose value it receives via Bluetooth to
	the Wear OS watch via TCP;</p>
	<li><p>It is also possible to directly connect the sensor with the
	Wear OS watch. For this you need a Wear OS watch with good Bluetooth
	connectivity. My Samsung Galaxy Watch4 performance is strangely
	dependent on the sensor. Only two sensors had good Bluetooth
	connectivity with the watch, the other 3 or 4 bad. While all
	performed good with my Smartphone.</p>
</ol>
<p>Some pictures are shown at
<a href="https://www.juggluco.nl/JugglucoWearOS/index.html">https://www.juggluco.nl/JugglucoWearOS</a></p>
<p>To get it working do the following:</p>
<ul>
	<li><p>Ensure that both Bluetooth and WIFI are working on watch and
	phone;</p>
	<li><p>See that the watch has enough free storage space and RAM
	left. It is possible that Juggluco has to be reinstalled if the
	device runs out of storage space at a critical moment;</p>
	<li><p>Make the phone version of Juggluco working with the sensor.
	You have to scan the sensor a few times with &quot;Sensor via
	Bluetooth&quot; set. Receiving glucose values on the phone via
	Bluetooth is not necessary;</p>
	<li><p>Install the Wear OS version of Juggluco on your Wear Os watch
	and start it;</p>

	<li><p>On the phone go to left-menu-&gt;Watch-&gt;Wear Os Config.
	Your watch should be displayed in the spinner. Press &quot;Init
	watch app&quot;;</p>
	<li><p>If everything went well, in both Juggluco's a TCP connection
	is configured and all data on the phone is sent to the watch. This
	can take a long time if you were using Juggluco for a long time. You
	can check if the TCP connection is configured by looking in the
	Mirror dialog (phone: left middle menu-&gt;Mirror, watch:
	left-menu-&gt;Mirror). A connection with the same id as shown in the
	spinner for your watch should be shown. On the watch is should also
	contain the IP of the phone. If the are not there or the watch side
	doesn't contain an IP, press again on &quot;Init watch app&quot;. If
	it still isn't there, check the Bluetooth connection and the phone
	app responsible for the connection to your watch;</p>
	<li><p>If everything went well, the same data, as displayed on the
	phone version of Juggluco, is displayed on the watch version of
	Juggluco. Every new glucose value received by the phone is sent via
	TCP to the watch. Some settings like unit, glucose alarm levels and
	reminders are also transmitted to the watch. Later changes should be
	made on the watch itself. 
	</p>
	<li><p>If you have a smartwatch with good Bluetooth connectivity and
	you like to receive glucose values on your watch without having to
	carry your phone, you can connect the watch version of Juggluco
	directly with the sensor. After all values are sent to the watch,
	you can check <b>&quot;Direct sensor-watch connection&quot;</b>. By
	this <i>&quot;sensor via Bluetooth&quot;</i> is turned off in the
	phone and turned on in the watch. The stream values are now sent
	from watch to phone as you can check in the Mirror dialog;</p>
	<li><p>If you want to sent amounts from the watch to the phone, you
	should reverse the send-direction yourself in the Mirror dialog by
	unchecking it on the phone and checking it on the watch. On the
	phone &quot;<i>Receive from</i>&quot; should also be set. If
	everything isn't set exactly right, it doesn't work. &quot;Don't
	change amounts&quot; should be changed. The labels of <i>amounts</i>
	are always sent with the amounts. If you change the direction of the
	transmission of amounts from watch to phone, you can't change the
	labels. It shouldn't be too easy;</p>
</ul>
<p>If the sensor has a direct Bluetooth connection with the watch and
it's values are sent to a smartphone, scanned values should also be
sent from the phone to the watch and the stream values should be
synced before scanning the sensor with Juggluco (the settings are
configured automatically this way.) Otherwise, old values could be
sent back to the watch or modified authentication information is not
sent to the watch, which will result in <i>Unlock key</i> errors.</p>
<p>Changes to the connection should also only be made when the data
is synchronized; the data on phone and watch should be complete
copies (with the exception that you can leave out <span style="font-variant: normal"><span style="font-style: normal"><u><span style="font-weight: normal">all</span></u></span></span>
amount data).</p>
<p>The first time, when a lot of data has to be transferred from
smartphone to watch, you can attach the watch to the charger. My
watch turns on WIFI when it is attached to the charger.</p>
<h5 class="western">Watch-Phone connection</h5>
<p>At initialization, when all data are sent from phone to watch, you
need a Wi-Fi connection between watch and phone. Later data is sent
in small pieces via TCP. On my watch that is redirected through
Bluetooth, but only when the phone has an external connection, for
example Wi-Fi to your home network, a mobile data connection or a
portable hotspot. Otherwise the connection between phone and watch
stops after some time, because Wi-Fi is turned off by the system to
save battery power.</p>
<p>Juggluco itself detects the IPs of the other side, so you don't
need to set them. If you switch from Wi-Fi to mobile data, the IPs
are changed automatically. Sometimes you have to switch Wi-Fi or
mobile data off and on on your smartphone before it works (Juggluco
determines the IP at the moment Wi-Fi or mobile data is turned on,
but sometimes the IP is then not available yet.)</p>
<p>Automatic determination of the IP of the other side is specific
for the connection with a WearOS watch; for other Mirror connections
you still need to specify the IPs of the other side.</p>
<h5 class="western">Watch face</h5>
<p>Juggluco for Wear OS includes a watch face that shows your current
glucose level besides the time and up to four complications. To make
use of it you have to select this watch face on your watch or in your
watch companion app. Normally you will see the last glucose value
when the screen wakes up. When the display is in ambient (always on)
mode, the glucose value is only updated when the minute indicator is
increased or you press a button or raise your arm. So the displayed
value can be up to one minute delayed.</p>
<p>If you can find another watch face that accepts an app shortcut
complication, you could in principle also use another watch face and
add an app shortcut to Juggluco. This way you can know your glucose
level by pressing that shortcut.</p>
</body>
</html>
